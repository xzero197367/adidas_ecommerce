<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewBag.Title - Adidas Admin Dashboard</title>

    <!-- Security Meta Tags -->
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico">

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.min.css">

    <!-- AdminLTE Theme style -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">

    <!-- OverlayScrollbars -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/styles/overlayscrollbars.min.css">

    <!-- Custom CSS for Adidas Theme -->
    <style>
        :root {
            --adidas-black: #000000;
            --adidas-white: #ffffff;
            --adidas-blue: #004c93;
            --adidas-green: #7ed321;
            --adidas-orange: #ff6900;
        }

        /* Brand Customization */
        .brand-link {
            background-color: var(--adidas-white) !important; /* Changed from --adidas-black to --adidas-white */
            border-bottom: 1px solid #333;
            transition: all 0.3s ease;
        }

        .brand-link:hover {
            background-color: #222 !important;
        }

        .brand-text {
            color: var(--adidas-black) !important;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Sidebar Customization */
        .main-sidebar {
            background-color: #1a1a1a !important;
        }

        .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link {
            color: #c2c7d0;
            border-radius: 5px;
            margin: 2px 8px;
            transition: all 0.3s ease;
        }

        .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link:hover {
            background-color: var(--adidas-blue);
            color: white;
            transform: translateX(5px);
        }

        .sidebar-dark-primary .nav-sidebar > .nav-item > .nav-link.active {
            background-color: var(--adidas-orange);
            color: white;
            box-shadow: 0 2px 4px rgba(255, 105, 0, 0.3);
        }

        /* Header Customization */
        .main-header {
            background-color: var(--adidas-white);
            border-bottom: 2px solid var(--adidas-black);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Content Area */
        .content-wrapper {
            background-color: #f4f6f9;
        }

        /* Cards */
        .card {
            box-shadow: 0 0 1px rgba(0,0,0,.125), 0 1px 3px rgba(0,0,0,.2);
            border: none;
            border-radius: 8px;
        }

        .card-header {
            background-color: transparent;
            border-bottom: 1px solid #dee2e6;
            padding: 1rem 1.25rem;
        }

        /* Navigation Pills for Sub-items */
        .nav-treeview .nav-item .nav-link {
            padding-left: 2.5rem !important;
            font-size: 0.9rem;
        }

        .nav-treeview .nav-item .nav-link:before {
            content: "▸";
            margin-right: 8px;
            color: var(--adidas-orange);
            transition: transform 0.3s ease;
        }

        .nav-treeview .nav-item .nav-link:hover:before {
            transform: rotate(90deg);
        }

        /* Responsive Improvements */


        /* Loading Animation */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 9999;
        }

        .loading-spinner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 2rem;
        }
    </style>

    <!-- Page Specific Styles -->
    @RenderSection("Styles", required: false)
</head>

<body class="hold-transition sidebar-mini layout-fixed">
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
        </div>
    </div>

    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button">
                        <i class="fas fa-bars"></i>
                    </a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="@Url.Action("Index", "Home")" class="nav-link">
                        <i class="fas fa-home"></i> Home
                    </a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="@Url.Action("Index", "Dashboard")" class="nav-link">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </a>
                </li>
            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Navbar Search -->
                <li class="nav-item">
                    <a class="nav-link" data-widget="navbar-search" href="#" role="button">
                        <i class="fas fa-search"></i>
                    </a>
                    <div class="navbar-search-block">
                        <form class="form-inline">
                            <div class="input-group input-group-sm">
                                <input class="form-control form-control-navbar" type="search" placeholder="Search products, orders..." aria-label="Search">
                                <div class="input-group-append">
                                    <button class="btn btn-navbar" type="submit">
                                        <i class="fas fa-search"></i>
                                    </button>
                                    <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </li>

                <!-- Messages Dropdown Menu -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-comments"></i>
                        <span class="badge badge-danger navbar-badge">3</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <a href="#" class="dropdown-item">
                            <div class="media">
                                <div class="media-body">
                                    <h3 class="dropdown-item-title">New Customer Inquiry</h3>
                                    <p class="text-sm">Product availability question...</p>
                                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                </div>
                            </div>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="@Url.Action("Messages", "Admin")" class="dropdown-item dropdown-footer">See All Messages</a>
                    </div>
                </li>

                <!-- Notifications Dropdown Menu -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-bell"></i>
                        <span class="badge badge-warning navbar-badge">15</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <span class="dropdown-item dropdown-header">15 Notifications</span>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-shopping-cart mr-2"></i> 4 new orders
                            <span class="float-right text-muted text-sm">3 mins</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-users mr-2"></i> 8 new customers
                            <span class="float-right text-muted text-sm">12 hours</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="@Url.Action("Notifications", "Admin")" class="dropdown-item dropdown-footer">See All Notifications</a>
                    </div>
                </li>

                <!-- User Account Menu -->
                <li class="nav-item dropdown user-menu">
                    <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">
                        <img src="~/images/admin-avatar.jpg" class="user-image img-circle elevation-2" alt="User Image">
                        <span class="d-none d-md-inline">@User.Identity.Name</span>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <li class="user-header bg-dark">
                            <img src="~/images/admin-avatar.jpg" class="img-circle elevation-2" alt="User Image">
                            <p>@User.Identity.Name - Administrator</p>
                        </li>
                        <li class="user-footer">
                            <a href="@Url.Action("Profile", "Account")" class="btn btn-default btn-flat">Profile</a>
                            <a href="@Url.Action("Logout", "Account")" class="btn btn-default btn-flat float-right">Sign out</a>
                        </li>
                    </ul>
                </li>


            </ul>
        </nav>

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary  elevation-4">
            <!-- Brand Logo -->
            <a href="@Url.Action("Index", "Dashboard")" class="brand-link ">
                <img src="~/images/adidas_logo.svg" alt="Adidas Logo" class="brand-image elevation-3 " style="opacity: .8">
                <span class="brand-text">Adidas Admin</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column nav-child-indent" data-widget="treeview" role="menu" data-accordion="false">

                        <!-- Dashboard Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-tachometer-alt"></i>
                                <p>Dashboard <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Dashboard")" class="nav-link">
                                        <i class="nav-icon fas fa-chart-line"></i>
                                        <p>Overview</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Analytics", "Dashboard")" class="nav-link">
                                        <i class="nav-icon fas fa-analytics"></i>
                                        <p>Analytics</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Products Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-box"></i>
                                <p>Products <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Products")" class="nav-link">
                                        <i class="nav-icon fas fa-list"></i>
                                        <p>Manage Products</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Categories")" class="nav-link">
                                        <i class="nav-icon fas fa-tags"></i>
                                        <p>Categories</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Brands")" class="nav-link">
                                        <i class="nav-icon fas fa-trademark"></i>
                                        <p>Brands</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Variants")" class="nav-link">
                                        <i class="nav-icon fas fa-palette"></i>
                                        <p>Variants</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Images", "Products")" class="nav-link">
                                        <i class="nav-icon fas fa-images"></i>
                                        <p>Product Images</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Reviews", "Products")" class="nav-link">
                                        <i class="nav-icon fas fa-star"></i>
                                        <p>Reviews</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Orders Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-shopping-cart"></i>
                                <p>Orders <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Orders")" class="nav-link">
                                        <i class="nav-icon fas fa-list-alt"></i>
                                        <p>All Orders</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Pending", "Orders")" class="nav-link">
                                        <i class="nav-icon fas fa-clock"></i>
                                        <p>Pending Orders</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Completed", "Orders")" class="nav-link">
                                        <i class="nav-icon fas fa-check-circle"></i>
                                        <p>Completed Orders</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Returns", "Orders")" class="nav-link">
                                        <i class="nav-icon fas fa-undo"></i>
                                        <p>Returns / Exchanges</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Invoices", "Orders")" class="nav-link">
                                        <i class="nav-icon fas fa-file-invoice"></i>
                                        <p>Invoices</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Customers Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-users"></i>
                                <p>Customers <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Customers")" class="nav-link">
                                        <i class="nav-icon fas fa-user-friends"></i>
                                        <p>All Customers</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Details", "Customers")" class="nav-link">
                                        <i class="nav-icon fas fa-user-edit"></i>
                                        <p>Customer Details</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Memberships", "Customers")" class="nav-link">
                                        <i class="nav-icon fas fa-crown"></i>
                                        <p>Memberships</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Addresses", "Customers")" class="nav-link">
                                        <i class="nav-icon fas fa-map-marker-alt"></i>
                                        <p>Addresses</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Shopping Cart Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-shopping-basket"></i>
                                <p>Shopping Cart <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Cart")" class="nav-link">
                                        <i class="nav-icon fas fa-eye"></i>
                                        <p>View Carts</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Abandoned", "Cart")" class="nav-link">
                                        <i class="nav-icon fas fa-exclamation-triangle"></i>
                                        <p>Abandoned Carts</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Wishlist Section -->
                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Wishlist")" class="nav-link">
                                <i class="nav-icon fas fa-heart"></i>
                                <p>Wishlists</p>
                            </a>
                        </li>

                        <!-- Discounts & Promotions Section -->
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="nav-icon fas fa-percentage"></i>
                                <p>Discounts & Promotions <i class="right fas fa-angle-left"></i></p>
                            </a>
                            <ul class="nav nav-treeview">
                                <li class="nav-item">
                                    <a href="@Url.Action("Index", "Discounts")" class="nav-link">
                                        <i class="nav-icon fas fa-ticket-alt"></i>
                                        <p>Manage Discounts</p>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="@Url.Action("Promotions", "Discounts")" class="nav-link">
                                        <i class="nav-icon fas fa-bullhorn"></i>
                                        <p>Active Promotions</p>
                                    </a>
                                </li>
                            </ul>
                        </li>

                        <!-- Inventory Section -->
                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Inventory")" class="nav-link">
                                <i class="nav-icon fas fa-warehouse"></i>
                                <p>Inventory Dashboard</p>
                            </a>
                        </li>

                        <!-- Settings Section -->
                        <li class="nav-header">SYSTEM</li>
                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Settings")" class="nav-link">
                                <i class="nav-icon fas fa-cogs"></i>
                                <p>Settings</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="@Url.Action("Index", "Reports")" class="nav-link">
                                <i class="nav-icon fas fa-chart-bar"></i>
                                <p>Reports</p>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Content Wrapper -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1 class="m-0">@ViewBag.Title</h1>
                        </div>
                        <div class="col-sm-6">
                            <ol class="breadcrumb float-sm-right">
                                @if (ViewBag.Breadcrumbs != null)
                                {
                                    @foreach (var breadcrumb in ViewBag.Breadcrumbs as List<dynamic>)
                                    {
                                        if (breadcrumb.IsActive)
                                        {
                                            <li class="breadcrumb-item active">@breadcrumb.Title</li>
                                        }
                                        else
                                        {
                                            <li class="breadcrumb-item"><a href="@breadcrumb.Url">@breadcrumb.Title</a></li>
                                        }
                                    }
                                }
                                else
                                {
                                    <li class="breadcrumb-item"><a href="@Url.Action("Index", "Dashboard")">Home</a></li>
                                    <li class="breadcrumb-item active">@ViewBag.Title</li>
                                }
                            </ol>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <!-- Anti-Forgery Token for AJAX requests -->
                    @Html.AntiForgeryToken()

                    <!-- Alert Messages -->
                    @if (TempData["SuccessMessage"] != null)
                    {
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            <i class="fas fa-check-circle"></i> @TempData["SuccessMessage"]
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }

                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <i class="fas fa-exclamation-triangle"></i> @TempData["ErrorMessage"]
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }

                    @if (TempData["InfoMessage"] != null)
                    {
                        <div class="alert alert-info alert-dismissible fade show" role="alert">
                            <i class="fas fa-info-circle"></i> @TempData["InfoMessage"]
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }

                    <!-- Main Content Area -->
                    @RenderBody()
                </div>
            </section>
        </div>

        <!-- Footer -->
        <footer class="main-footer">
            <strong>Copyright &copy; 2025 <a href="#">Adidas Admin Dashboard</a>.</strong>
            All rights reserved.
            <div class="float-right d-none d-sm-inline-block">
                <b>Version</b> 1.0.0
            </div>
        </footer>
    </div>

    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <!-- jQuery UI -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"></script>

    <!-- Bootstrap 4 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.2/js/bootstrap.bundle.min.js"></script>

    <!-- AdminLTE App -->
    <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>

    <!-- OverlayScrollbars -->
    <script src="https://cdn.jsdelivr.net/npm/overlayscrollbars@2.3.0/browser/overlayscrollbars.browser.es6.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        $(document).ready(function() {
            // Initialize OverlayScrollbars for sidebar
            if (typeof OverlayScrollbarsGlobal !== 'undefined') {
                const { OverlayScrollbars } = OverlayScrollbarsGlobal;
                OverlayScrollbars(document.querySelector('.sidebar'), {
                    scrollbars: {
                        theme: 'os-theme-light',
                        autoHide: 'leave'
                    }
                });
            }

            // Set active menu item based on current URL
            var currentUrl = window.location.pathname.toLowerCase();
            $('.nav-sidebar .nav-link').each(function() {
                var linkUrl = $(this).attr('href');
                if (linkUrl && currentUrl.indexOf(linkUrl.toLowerCase()) !== -1 && linkUrl !== '/') {
                    $(this).addClass('active');
                    $(this).closest('.nav-item').addClass('menu-open');
                    $(this).closest('.nav-treeview').show();
                }
            });

            // Auto-hide alerts after 5 seconds
            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);

            // Loading overlay for AJAX requests
            $(document).ajaxStart(function() {
                $('#loadingOverlay').show();
            }).ajaxStop(function() {
                $('#loadingOverlay').hide();
            });

            // Add CSRF token to all AJAX requests
            var token = $('input[name="__RequestVerificationToken"]').val();
            if (token) {
                $.ajaxSetup({
                    beforeSend: function(xhr) {
                        xhr.setRequestHeader('RequestVerificationToken', token);
                    }
                });
            }

            // Smooth scrolling for anchor links
            $('a[href^="#"]').on('click', function(event) {
                var target = $(this.getAttribute('href'));
                if (target.length) {
                    event.preventDefault();
                    $('html, body').stop().animate({
                        scrollTop: target.offset().top - 100
                    }, 1000);
                }
            });

            // Confirm delete actions
            $('.btn-delete, .delete-btn').on('click', function(e) {
                if (!confirm('Are you sure you want to delete this item? This action cannot be undone.')) {
                    e.preventDefault();
                    return false;
                }
            });

            // Form validation feedback
            $('form').on('submit', function() {
                var form = $(this);
                var isValid = true;

                // Check required fields
                form.find('input[required], select[required], textarea[required]').each(function() {
                    if (!$(this).val()) {
                        $(this).addClass('is-invalid');
                        isValid = false;
                    } else {
                        $(this).removeClass('is-invalid').addClass('is-valid');
                    }
                });

                if (!isValid) {
                    toastr.error('Please fill in all required fields.');
                    return false;
                }
            });

            // Real-time form validation
            $('input, select, textarea').on('blur', function() {
                if ($(this).attr('required') && !$(this).val()) {
                    $(this).addClass('is-invalid');
                } else {
                    $(this).removeClass('is-invalid').addClass('is-valid');
                }
            });

            // Search functionality
            $('#navbar-search-input').on('keyup', function() {
                var searchTerm = $(this).val().toLowerCase();
                if (searchTerm.length > 2) {
                    // Implement search logic here
                    console.log('Searching for: ' + searchTerm);
                }
            });

            // Sidebar menu state persistence
            $('.nav-item > .nav-link').on('click', function() {
                var menuItem = $(this).closest('.nav-item');
                var menuId = menuItem.find('a').attr('href');

                if (menuItem.hasClass('has-treeview')) {
                    var isOpen = menuItem.hasClass('menu-open');
                    localStorage.setItem('menu_' + menuId, !isOpen);
                }
            });

            // Restore menu states from localStorage
            $('.nav-item.has-treeview').each(function() {
                var menuItem = $(this);
                var menuId = menuItem.find('> a').attr('href');
                var isOpen = localStorage.getItem('menu_' + menuId) === 'true';

                if (isOpen) {
                    menuItem.addClass('menu-open');
                    menuItem.find('> .nav-treeview').show();
                }
            });

            // Responsive table wrapper
            $('table').wrap('<div class="table-responsive"></div>');

            // Auto-refresh functionality for dashboard
            if (window.location.pathname.includes('Dashboard')) {
                setInterval(function() {
                    // Refresh dashboard data every 5 minutes
                    if (typeof refreshDashboardData === 'function') {
                        refreshDashboardData();
                    }
                }, 300000);
            }

            // Tooltip initialization
            $('[data-toggle="tooltip"]').tooltip();

            // Popover initialization
            $('[data-toggle="popover"]').popover();

            // DataTable default configuration
            if ($.fn.DataTable) {
                $.extend($.fn.dataTable.defaults, {
                    responsive: true,
                    autoWidth: false,
                    language: {
                        search: "Search:",
                        lengthMenu: "Show _MENU_ entries",
                        info: "Showing _START_ to _END_ of _TOTAL_ entries",
                        infoEmpty: "Showing 0 to 0 of 0 entries",
                        infoFiltered: "(filtered from _MAX_ total entries)",
                        zeroRecords: "No matching records found",
                        emptyTable: "No data available in table",
                        paginate: {
                            first: "First",
                            last: "Last",
                            next: "Next",
                            previous: "Previous"
                        }
                    },
                    dom: '<"row"<"col-sm-12 col-md-6"l><"col-sm-12 col-md-6"f>>' +
                         '<"row"<"col-sm-12"tr>>' +
                         '<"row"<"col-sm-12 col-md-5"i><"col-sm-12 col-md-7"p>>',
                    pageLength: 25,
                    lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]]
                });
            }
        });

        // Global functions
        window.showLoading = function() {
            $('#loadingOverlay').show();
        };

        window.hideLoading = function() {
            $('#loadingOverlay').hide();
        };

        window.showNotification = function(message, type = 'success') {
            var alertClass = 'alert-' + type;
            var iconClass = type === 'success' ? 'fa-check-circle' :
                           type === 'error' ? 'fa-exclamation-triangle' : 'fa-info-circle';

            var alertHtml = '<div class="alert ' + alertClass + ' alert-dismissible fade show" role="alert">' +
                           '<i class="fas ' + iconClass + '"></i> ' + message +
                           '<button type="button" class="close" data-dismiss="alert" aria-label="Close">' +
                           '<span aria-hidden="true">&times;</span></button></div>';

            $('.content .container-fluid').prepend(alertHtml);

            setTimeout(function() {
                $('.alert').fadeOut('slow');
            }, 5000);
        };

        // AJAX Helper Functions
        window.ajaxGet = function(url, successCallback, errorCallback) {
            $.ajax({
                url: url,
                type: 'GET',
                beforeSend: function() {
                    showLoading();
                },
                success: function(data) {
                    hideLoading();
                    if (successCallback) successCallback(data);
                },
                error: function(xhr, status, error) {
                    hideLoading();
                    if (errorCallback) {
                        errorCallback(xhr, status, error);
                    } else {
                        showNotification('An error occurred: ' + error, 'error');
                    }
                }
            });
        };

        window.ajaxPost = function(url, data, successCallback, errorCallback) {
            $.ajax({
                url: url,
                type: 'POST',
                data: data,
                beforeSend: function() {
                    showLoading();
                },
                success: function(response) {
                    hideLoading();
                    if (successCallback) successCallback(response);
                },
                error: function(xhr, status, error) {
                    hideLoading();
                    if (errorCallback) {
                        errorCallback(xhr, status, error);
                    } else {
                        showNotification('An error occurred: ' + error, 'error');
                    }
                }
            });
        };

        // Image upload preview
        window.previewImage = function(input, previewId) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    $('#' + previewId).attr('src', e.target.result).show();
                };
                reader.readAsDataURL(input.files[0]);
            }
        };

        // Format currency
        window.formatCurrency = function(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD'
            }).format(amount);
        };

        // Format date
        window.formatDate = function(date) {
            return new Date(date).toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
            });
        };

        // Export table data
        window.exportTableData = function(tableId, filename, format = 'csv') {
            var table = $('#' + tableId);
            var data = [];

            // Get headers
            var headers = [];
            table.find('thead th').each(function() {
                headers.push($(this).text().trim());
            });
            data.push(headers);

            // Get rows
            table.find('tbody tr').each(function() {
                var row = [];
                $(this).find('td').each(function() {
                    row.push($(this).text().trim());
                });
                data.push(row);
            });

            if (format === 'csv') {
                var csvContent = "data:text/csv;charset=utf-8,";
                data.forEach(function(rowArray) {
                    var row = rowArray.join(",");
                    csvContent += row + "\r\n";
                });

                var encodedUri = encodeURI(csvContent);
                var link = document.createElement("a");
                link.setAttribute("href", encodedUri);
                link.setAttribute("download", filename + ".csv");
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        };
    </script>

    <!-- Toastr for notifications -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script>
        // Toastr configuration
        toastr.options = {
            "closeButton": true,
            "debug": false,
            "newestOnTop": true,
            "progressBar": true,
            "positionClass": "toast-top-right",
            "preventDuplicates": true,
            "onclick": null,
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };
    </script>

    <!-- Page specific scripts -->
    @RenderSection("Scripts", required: false)

</body>
</html>